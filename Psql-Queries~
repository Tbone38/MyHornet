Sql for Current Members


SELECT member.id, get_name(member.firstname, member.surname) AS "Name", member.phonecell AS "Mobile", programme.name AS "Programme", membership.startdate AS "Start", membership.enddate AS "End", membership.paymentdue AS "Fee", price_desc(0::text::money, programme.id) AS "Price Desc", member_last_visit(member.id) AS "Last Visit", get_happiness(member.id) AS "Happy" FROM get_all_members('2013-03-04', '2014-03-05')AS fun left join member on fun.mid=member.id left join membership on fun.msid=membership.id left join programme on fun.pid=programme.id left join programmegroup on fun.pgid=programmegroup.id left join member_view on fun.mid=member_view.id left join staff on fun.ptid=staff.id left join promotion on fun.pmtid=promotion.promotion_id left join involvement on fun.involvementid=involvement.id   ORDER BY "Name", "Mobile", "Programme", "Start", "End", "Fee", "Price Desc", "Last Visit", "Happy";;

Membershipless

SELECT member.id, member.joiningdate AS "Member Joining Date", get_name(member.firstname, member.surname) AS "Member Name", get_name(staff.firstname, staff.surname) AS "Staff Name" FROM get_membershipless('2013-02-04', '2014-03-05')AS fun left join member on fun.mid=member.id left join staff on fun.cmid=staff.id   ORDER BY "Member Joining Date", "Member Name", "Staff Name";;


Gross Membership Sales

SELECT fun.date AS "Date", fun.enquirynum AS "Enquiries", fun.tourbooked AS "Enquiry Bookings", fun.tourshowed AS "Enquiry Bookings Showed", fun.membersold AS "Members Converted", fun.mssalettlpif AS "PIF Membership Sales", fun.mssalettlongoing AS "Ongoing Membership Sales", fun.mssalettl AS "Total Membership Sales", fun.mspayment AS "Membership Payments" FROM get_grosssale_report('2013-02-04', '2014-03-05')AS fun   ORDER BY "Date", "Enquiries", "Enquiry Bookings", "Enquiry Bookings Showed", "Members Converted", "PIF Membership Sales", "Ongoing Membership Sales", "Total Membership Sales", "Membership Payments";;

All Member Bookings

SELECT member.id, fun.m_name AS "Name", booking.arrival AS "Booking Date", booking.endtime - booking.starttime AS "Duration", booking.starttime AS "Booking Time", fun.b_result AS "Booking State", fun.r_name AS "Resource", fun.class_name AS "Class", fun.bt_name AS "Booking Type" FROM get_member_booking('2013-02-04', '2014-03-05')AS fun left join booking on fun.id=booking.id left join member on fun.mid=member.id left join resource on fun.rid=resource.id left join resultstatus on fun.rsid=resultstatus.id left join member_view on fun.mid=member_view.id   ORDER BY "Name", "Booking Date", "Duration", "Booking Time", "Booking State", "Resource", "Class", "Booking Type";;





